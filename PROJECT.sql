create database project;
use project;

#SUPPLIER
create table SUPPLIER (SID VARCHAR(10) primary key, SNAME VARCHAR(30) NOT NULL, 
SADD varchar(30) NOT NULL, SCITY varchar(30) default('Delhi'), SPHONE varchar(15) unique, EMAIL VARCHAR(30));

SELECT * FROM SUPPLIER;


# PRODUCT 
create table PRODUCT (PID varchar(10) primary key, PDESC varchar(30) NOT null,
PRICE int CHECK(PRICE>0) not null, CATEGORY varchar(10) CHECK(CATEGORY='IT' OR CATEGORY='HA' OR CATEGORY='HC'),
SID VARCHAR(20) NOT NULL,
FOREIGN KEY (SID) references SUPPLIER(SID));

SELECT * FROM PRODUCT;


#STOCK
create table STOCK(PID varchar(10) NOT NULL,FOREIGN KEY (PID) references PRODUCT(PID),
SQTY int CHECK(SQTY>=0) not null, ROL INT check(ROL>0) not null, MOQ INT CHECK (MOQ>5) not null);

SELECT * FROM STOCK;
describe stock;


# CUST
create table CUST(CID varchar(10) primary key, CNAME varchar(30) NOT null,
ADDRESS varchar(30) NOT null,  CITY varchar(30) NOT null, 
PHONE VARCHAR(15) NOT null, EMAIL varchar(30) NOT null, DOB DATE CHECK(DOB<'2000-01-01'));

SELECT * FROM CUST;
describe CUST;


# ORDERS
create TABLE ORDERS(OID varchar(10) primary KEY, ODATE DATE NOT NULL, 
PID VARCHAR(20) NOT NULL, FOREIGN KEY (PID) references PRODUCT(PID),
CID VARCHAR(20) NOT NULL,  FOREIGN KEY (CID) references CUST(CID),
OQTY INT NOT NULL CHECK(OQTY>=1));

SELECT * FROM ORDERS;
describe ORDERS;

delimiter //
CREATE  PROCEDURE `ADD_CUST`(IN CID varchar(10), IN CNAME varchar(30), IN ADDRESS varchar(30), IN CITY varchar(30),
IN PHONE varchar(30),IN EMAIL varchar(30),IN DOB DATE)
BEGIN
	insert into CUST values(CID, CNAME, ADDRESS, CITY, PHONE, EMAIL, DOB)
	
END;
delimiter //

delimiter //
CREATE  PROCEDURE `ADD_ORD`(IN OID varchar(10),  IN ODATE date, IN PID VARCHAR(10), IN CID varchar(10),
IN OQTY INT)
BEGIN
		insert into orders values (OID, ODATE, PID, CID, OQTY);
END
delimiter //

delimiter //
CREATE PROCEDURE `ADD_PROD`(IN PID varchar(10), IN PDESC varchar(30), IN PRICE int, 
IN CATEGORY varchar(10),IN SID VARCHAR(20))
BEGIN
	insert into PRODUCT values(PID, PDESC, PRICE, CATEGORY, SID);
END
delimiter //

delimiter //
CREATE  PROCEDURE `ADD_STK`(IN PID varchar(10), IN SQTY INT, IN ROL INT , IN MOQ int)
BEGIN
		insert into STOCK values(PID, SQTY, ROL, MOQ);
END
delimiter //

delimiter //
CREATE PROCEDURE `ADD_SUP`(IN SID varchar(10), IN SNAME varchar(30), IN SADD varchar(30), IN SCITY varchar(30),
IN SPHONE varchar(15), in EMAIL VARCHAR(30))
BEGIN
	insert into supplier values(sid, sname, sadd, scity, sphone, email);
END
delimiter //

# INSERTION SUPPLIER
CALL ADD_SUP('S0001', 'BELGAUM NETWORK', 'SHAPUR', 'BELGAUM', '9845112345', 'BGMNET@GMAIL.COM');
CALL ADD_SUP('S0002', 'AGARWAL_ELECTRONICS', 'NULL', 'MP', '9845109876', 'AGARWAL@GMAIL.COM');
CALL ADD_SUP('S0003', 'SUNDHA_ELECTRONICS', 'PANGUL_GALLI', 'BELGAUM', '9845101234', 'SUNDHA@GMAIL.COM');
CALL ADD_SUP('S0004', 'IQBAL', 'MAJESTIC', 'BANGLORE', '8123456789', 'IQBAL@GMAIL.COM');
CALL ADD_SUP('S0005', 'SURESH', 'GHADHINAGAR', 'KOLHAPUR', '8123478900', 'SURESH@GMAIL.COM');

SELECT * FROM SUPPLIER;

# INSERTION PRODUCT  (PID,PDESC,PRICE,CATEGORY,SID)
CALL ADD_PROD('P0001', 'M_1627_WALL_CLOCK', 650, 'HA', 'S0001');
CALL ADD_PROD('P0002', 'M_6227_WALL_CLOCK', 950, 'HA', 'S0001');
CALL ADD_PROD('P0003', 'M_927_WALL_CLOCK', 250, 'HA', 'S0001');
CALL ADD_PROD('P0004', 'WALL_MOMENT', 90, 'HA', 'S0001');
CALL ADD_PROD('P0005', 'F2N_BEETEL_TELEOHONE', 2050, 'HA', 'S0002');
CALL ADD_PROD('P0006', 'F2N_BEETEL_BATTERY', 300, 'HA', 'S0002');
CALL ADD_PROD('P0007', 'ANTENNA', 1500, 'HA', 'S0002');
CALL ADD_PROD('P0008', 'F2N_BEETEL_DISPLAY', 350, 'HA', 'S0002');
CALL ADD_PROD('P0009', 'C21Y_REALME', 9000, 'IT', 'S0003');
CALL ADD_PROD('P0010', 'C25_REALME', 12000, 'IT', 'S0003');
CALL ADD_PROD('P0011', 'M10_REDMI', 18000, 'IT', 'S0003');
CALL ADD_PROD('P0012', 'MOBILE_COVERS', 60, 'IT', 'S0003');
CALL ADD_PROD('P0013', 'DELL_KEYBORAD', 1200, 'IT', 'S0004');
CALL ADD_PROD('P0014', 'HP_LAPTOP', 65000, 'IT', 'S0004');
CALL ADD_PROD('P0015', 'DELL_LAPTOP', 45000, 'IT', 'S0004');
CALL ADD_PROD('P0016', 'HP_MOUSE', 900, 'IT', 'S0004');
CALL ADD_PROD('P0017', 'SWABING_MACHINE', 1500, 'HC', 'S0005');
CALL ADD_PROD('P0018', 'TEMPARATUE_DEVICE', 600, 'HC', 'S0005');

SELECT * FROM PRODUCT;
USE PROJECT;


# INSERTION STOCK  (PID,SQTY,ROL,MOQ)
CALL ADD_STK('P0001', 1, 3, 6);
CALL ADD_STK('P0002', 2, 2, 6);
CALL ADD_STK('P0003', 2, 4, 6);
CALL ADD_STK('P0004', 4, 20, 6);
CALL ADD_STK('P0005', 1, 10, 6);
CALL ADD_STK('P0009', 1, 3, 6);
CALL ADD_STK('P0010', 1, 2, 6);
CALL ADD_STK('P0012', 5, 30, 6);
CALL ADD_STK('P0014', 1, 3, 6);
CALL ADD_STK('P0015', 1, 3, 6);

SELECT * FROM STOCK;

# INSERTION CUST  (CID,CNAME,ADDRESS,CITY,PHONE,EMAIL,DOB)
CALL ADD_CUST('C0001', 'ASFI', 'DANDELI', 'KARWAR', '9012345675', 'ASFI@GAMIL.COM','1997-01-01');
CALL ADD_CUST('C0002', 'MAIRA', 'KHANPUR', 'BELGAUM', '9012312345', 'MAIRA@GAMIL.COM','1994-01-01');
CALL ADD_CUST('C0003', 'ARFA', 'MOSHI', 'PUNE', '9012349876', 'ARFA@GAMIL.COM','1993-01-01');
CALL ADD_CUST('C0004', 'RIHAN', 'MAJESTIC', 'BANGLORE', '9012345675', 'RIHAN@GAMIL.COM','1995-01-01');
CALL ADD_CUST('C0005', 'SHRIDHAR', 'KHANPUR', 'BELGAUM', '9012343475', 'SHRI@GAMIL.COM','1990-01-01');
CALL ADD_CUST('C0006', 'SHIVDEEP', 'PIMPRI', 'PUNE', '8012343412', 'SV@GAMIL.COM','1990-01-01');
CALL ADD_CUST('C0007', 'CLINTON', 'KHANPUR', 'BELGAUM', '9012342365', 'CLINTON@GAMIL.COM','1990-01-01');
CALL ADD_CUST('C0008', 'MUFFASSIL', 'KHANPUR', 'BELGAUM', '9017846812', 'MK@GAMIL.COM','1990-01-01');

SELECT * FROM CUST;

# INSERTION ORDERS  (OID,ODATE,PID,CID,OQTY)
CALL ADD_ORD('0OOO1', CURDATE(), 'P0001', 'C0005', 1);
CALL ADD_ORD('0OOO2', CURDATE(), 'P0003', 'C0004', 1);
CALL ADD_ORD('0OOO3', CURDATE(), 'P0005', 'C0007', 1);
CALL ADD_ORD('0OOO4', CURDATE(), 'P0011', 'C0006', 1);
CALL ADD_ORD('0OOO5', CURDATE(), 'P0012', 'C0001', 4);
CALL ADD_ORD('0OOO6', CURDATE(), 'P0014', 'C0001', 1);
CALL ADD_ORD('0OOO7', CURDATE(), 'P0016', 'C0008', 2);


